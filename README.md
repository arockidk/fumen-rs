redone to work with wasm_bindgen
